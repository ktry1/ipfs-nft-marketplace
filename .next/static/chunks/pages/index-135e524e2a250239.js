(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{75557:function(a,b,c){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return c(50338)}])},50338:function(g,b,a){"use strict";a.r(b),a.d(b,{default:function(){return z}});var h=a(85893);a(9008);var c=a(25675),i=a.n(c),j=a(83078),k=a(47568),d=a(34051),l=a.n(d),m=a(67294),n=a(4672),o=a(67225),p=a(34295),q=a(35553);function r(a){var g,i,b=a.nftAddress,c=a.tokenId,o=a.isVisible,d=a.marketplaceAddress,e=a.onClose,u=(0,p.lm)(),f=(0,m.useState)(0),r=f[0],v=f[1],w=(g=(0,k.Z)(l().mark(function a(b){return l().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,b.wait(1);case 2:u({type:"success",message:"Listing Updated!",title:"Listing updated - please refresh(and move blocks)",position:"topR"}),e&&e(),v("0");case 5:case"end":return a.stop()}},a)})),function(a){return g.apply(this,arguments)}),x=(i=(0,k.Z)(l().mark(function a(b){return l().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,b.wait(1);case 2:e(),u({type:"success",message:"Listing Cancelled!",title:"Listing cancelled - please refresh(and move blocks)",position:"topR"});case 4:case"end":return a.stop()}},a)})),function(a){return i.apply(this,arguments)}),s=(0,j.JX)({abi:n,contractAddress:d,functionName:"updateListing",params:{nftAddress:b,tokenId:c,newPrice:q.fi(r||"0")}}),y=s.runContractFunction,t=(0,j.JX)({abi:n,contractAddress:d,functionName:"cancelListing",params:{nftAddress:b,tokenId:c}}),z=t.runContractFunction;return(0,h.jsx)(p.u_,{isVisible:o,onCancel:e,onCloseButtonPressed:e,onOk:function(){y({onError:function(a){console.log(a)},onSuccess:w})},children:(0,h.jsxs)("div",{className:"flex justify-start",children:[(0,h.jsx)(p.II,{className:"mr-4",label:"Update Listing Price in L1 currency (ETH)",name:"New listing price",type:"number",onChange:function(a){v(a.target.value)}}),(0,h.jsx)(p.zx,{text:"Cancel listing",theme:"colored",color:"red",onClick:function(){z({onError:function(a){console.log(a)},onSuccess:x})}})]})})}function s(a){return a.src.replace("ipfs://","https://ipfs.io/ipfs/")}var t=function(a,b){if(a.length<=b)return a;var c="...",d=b-c.length,e=Math.ceil(d/2),f=Math.floor(d/2);return a.substring(0,e)+c+a.substring(a.length-f)};function u(a){var e=a.price,c=a.nftAddress,b=a.tokenId,f=a.marketplaceAddress,d=a.seller,H=(0,p.lm)(),g=(0,j.Nr)(),z=g.isWeb3Enabled,A=g.account,u=(0,m.useState)(""),v=u[0],I=u[1],w=(0,m.useState)(""),B=w[0],J=w[1],x=(0,m.useState)(""),C=x[0],K=x[1],y=(0,m.useState)(!1),D=y[0],L=y[1],M=(0,j.JX)({abi:o,contractAddress:c,functionName:"tokenURI",params:{tokenId:b}}).runContractFunction,N=(0,j.JX)({abi:n,contractAddress:f,functionName:"buyItem",msgValue:e,params:{nftAddress:c,tokenId:b}}).runContractFunction;function O(){return(O=(0,k.Z)(l().mark(function a(){var b,c,d,e,f;return l().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,M();case 2:if(!(b=a.sent)){a.next=15;break}return c=b.replace("ipfs://","https://ipfs.io/ipfs/"),a.next=7,fetch(c);case 7:return a.next=9,a.sent.json();case 9:J((d=a.sent).name),K(d.description),I(f=e=d.image);case 15:case"end":return a.stop()}},a)}))).apply(this,arguments)}var E,P=(E=(0,k.Z)(l().mark(function a(b){return l().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,b.wait(1);case 2:H({type:"success",message:"Successfully bought an NFT!",title:"Purchase successful - please refresh(and move blocks)",position:"topR"});case 3:case"end":return a.stop()}},a)})),function(a){return E.apply(this,arguments)});(0,m.useEffect)(function(){z&&function(){O.apply(this,arguments)}()},[z]);var F=d===A|| void 0===d,G=F?"You":t(d||"",15);return(0,h.jsx)("div",{children:v?(0,h.jsxs)("div",{children:[(0,h.jsx)(r,{isVisible:D,tokenId:b,marketplaceAddress:f,nftAddress:c,onClose:function(){return L(!1)}}),(0,h.jsx)(p.Zb,{title:B,description:C,onClick:function(){F?L(!0):N({onError:function(a){console.log(a)},onSuccess:P})},children:(0,h.jsx)("div",{className:"p-2",children:(0,h.jsxs)("div",{className:"flex flex-col items-end gap-2",children:[(0,h.jsxs)("div",{children:["#",b]}),(0,h.jsxs)("div",{className:"italic text-sm",children:["Owned by ",G]}),(0,h.jsx)(i(),{loader:s,src:v,height:"200",width:"200"}),(0,h.jsxs)("div",{className:"font-bold",children:[q.dF(e)," ETH"]})]})})})]}):(0,h.jsx)("div",{children:"Loading..."})})}var v=a(48036),w=a(16991),x=a(7297),e=a(17283);function f(){var a=(0,x.Z)(['\n    {\n        activeItems(first: 5, where: { buyer: "0x0000000000000000000000000000000000000000" }) {\n            id\n            buyer\n            seller\n            nftAddress\n            tokenId\n            price\n        }\n    }\n']);return f=function(){return a},a}var y=(0,e.Ps)(f());function z(){var b=(0,j.Nr)(),e=b.isWeb3Enabled,c=b.chainId,f=c?parseInt(c).toString():"31337",i=v[f].NftMarketplace[0],a=(0,w.a)(y),g=a.loading,d=(a.error,a.data);return(0,h.jsxs)("div",{className:"container mx-auto",children:[(0,h.jsx)("h1",{className:"py-4 px-4 font-bold text-2xl",children:"Recently Listed"}),(0,h.jsx)("div",{className:"flex flex-wrap",children:e?g||!d?(0,h.jsx)("div",{children:"Loading..."}):d.activeItems.map(function(a){var d=a.price,b=a.nftAddress,c=a.tokenId,e=a.seller;return(0,h.jsx)("div",{children:(0,h.jsx)(u,{price:d,nftAddress:b,tokenId:c,marketplaceAddress:i,seller:e})},"".concat(b).concat(c))}):(0,h.jsx)("div",{children:"Web3 Currently Not Enabled"})})]})}},67225:function(a){"use strict";a.exports=JSON.parse('[{"type":"constructor","payable":false,"inputs":[]},{"type":"event","anonymous":false,"name":"Approval","inputs":[{"type":"address","name":"owner","indexed":true},{"type":"address","name":"approved","indexed":true},{"type":"uint256","name":"tokenId","indexed":true}]},{"type":"event","anonymous":false,"name":"ApprovalForAll","inputs":[{"type":"address","name":"owner","indexed":true},{"type":"address","name":"operator","indexed":true},{"type":"bool","name":"approved","indexed":false}]},{"type":"event","anonymous":false,"name":"DogMinted","inputs":[{"type":"uint256","name":"tokenId","indexed":true}]},{"type":"event","anonymous":false,"name":"Transfer","inputs":[{"type":"address","name":"from","indexed":true},{"type":"address","name":"to","indexed":true},{"type":"uint256","name":"tokenId","indexed":true}]},{"type":"function","name":"TOKEN_URI","constant":true,"stateMutability":"view","payable":false,"gas":29000000,"inputs":[],"outputs":[{"type":"string"}]},{"type":"function","name":"approve","constant":false,"payable":false,"gas":29000000,"inputs":[{"type":"address","name":"to"},{"type":"uint256","name":"tokenId"}],"outputs":[]},{"type":"function","name":"balanceOf","constant":true,"stateMutability":"view","payable":false,"gas":29000000,"inputs":[{"type":"address","name":"owner"}],"outputs":[{"type":"uint256"}]},{"type":"function","name":"getApproved","constant":true,"stateMutability":"view","payable":false,"gas":29000000,"inputs":[{"type":"uint256","name":"tokenId"}],"outputs":[{"type":"address"}]},{"type":"function","name":"getTokenCounter","constant":true,"stateMutability":"view","payable":false,"gas":29000000,"inputs":[],"outputs":[{"type":"uint256"}]},{"type":"function","name":"isApprovedForAll","constant":true,"stateMutability":"view","payable":false,"gas":29000000,"inputs":[{"type":"address","name":"owner"},{"type":"address","name":"operator"}],"outputs":[{"type":"bool"}]},{"type":"function","name":"mintNft","constant":false,"payable":false,"gas":29000000,"inputs":[],"outputs":[]},{"type":"function","name":"name","constant":true,"stateMutability":"view","payable":false,"gas":29000000,"inputs":[],"outputs":[{"type":"string"}]},{"type":"function","name":"ownerOf","constant":true,"stateMutability":"view","payable":false,"gas":29000000,"inputs":[{"type":"uint256","name":"tokenId"}],"outputs":[{"type":"address"}]},{"type":"function","name":"safeTransferFrom","constant":false,"payable":false,"gas":29000000,"inputs":[{"type":"address","name":"from"},{"type":"address","name":"to"},{"type":"uint256","name":"tokenId"}],"outputs":[]},{"type":"function","name":"safeTransferFrom","constant":false,"payable":false,"gas":29000000,"inputs":[{"type":"address","name":"from"},{"type":"address","name":"to"},{"type":"uint256","name":"tokenId"},{"type":"bytes","name":"data"}],"outputs":[]},{"type":"function","name":"setApprovalForAll","constant":false,"payable":false,"gas":29000000,"inputs":[{"type":"address","name":"operator"},{"type":"bool","name":"approved"}],"outputs":[]},{"type":"function","name":"supportsInterface","constant":true,"stateMutability":"view","payable":false,"gas":29000000,"inputs":[{"type":"bytes4","name":"interfaceId"}],"outputs":[{"type":"bool"}]},{"type":"function","name":"symbol","constant":true,"stateMutability":"view","payable":false,"gas":29000000,"inputs":[],"outputs":[{"type":"string"}]},{"type":"function","name":"tokenURI","constant":true,"stateMutability":"view","payable":false,"gas":29000000,"inputs":[{"type":"uint256","name":"tokenId"}],"outputs":[{"type":"string"}]},{"type":"function","name":"transferFrom","constant":false,"payable":false,"gas":29000000,"inputs":[{"type":"address","name":"from"},{"type":"address","name":"to"},{"type":"uint256","name":"tokenId"}],"outputs":[]}]')},4672:function(a){"use strict";a.exports=JSON.parse('[{"type":"error","name":"NftMarketplace__AlreadyListed","inputs":[{"type":"address","name":"nftAddress"},{"type":"uint256","name":"tokenId"}]},{"type":"error","name":"NftMarketplace__InvalidPrice","inputs":[]},{"type":"error","name":"NftMarketplace__NoProceeds","inputs":[]},{"type":"error","name":"NftMarketplace__NotApproved","inputs":[]},{"type":"error","name":"NftMarketplace__NotListed","inputs":[{"type":"address","name":"nftAddress"},{"type":"uint256","name":"tokenId"}]},{"type":"error","name":"NftMarketplace__NotOWner","inputs":[]},{"type":"error","name":"NftMarketplace__PriceNotMet","inputs":[{"type":"address","name":"nftAddress"},{"type":"uint256","name":"tokenId"},{"type":"uint256","name":"price"}]},{"type":"error","name":"NftMarketplace__TransferFailed","inputs":[]},{"type":"event","anonymous":false,"name":"ItemBought","inputs":[{"type":"address","name":"buyer","indexed":true},{"type":"address","name":"nftAddress","indexed":true},{"type":"uint256","name":"tokenId","indexed":true},{"type":"uint256","name":"price","indexed":false}]},{"type":"event","anonymous":false,"name":"ItemCancelled","inputs":[{"type":"address","name":"seller","indexed":true},{"type":"address","name":"nftAddress","indexed":true},{"type":"uint256","name":"tokenId","indexed":true}]},{"type":"event","anonymous":false,"name":"ItemListed","inputs":[{"type":"address","name":"seller","indexed":true},{"type":"address","name":"nftAddress","indexed":true},{"type":"uint256","name":"tokenId","indexed":true},{"type":"uint256","name":"price","indexed":false}]},{"type":"function","name":"buyItem","constant":false,"stateMutability":"payable","payable":true,"gas":29000000,"inputs":[{"type":"address","name":"nftAddress"},{"type":"uint256","name":"tokenId"}],"outputs":[]},{"type":"function","name":"cancelListing","constant":false,"payable":false,"gas":29000000,"inputs":[{"type":"address","name":"nftAddress"},{"type":"uint256","name":"tokenId"}],"outputs":[]},{"type":"function","name":"getListing","constant":true,"stateMutability":"view","payable":false,"gas":29000000,"inputs":[{"type":"address","name":"nftAddress"},{"type":"uint256","name":"tokenId"}],"outputs":[{"type":"tuple","components":[{"type":"uint256","name":"price"},{"type":"address","name":"seller"}]}]},{"type":"function","name":"getProceeds","constant":true,"stateMutability":"view","payable":false,"gas":29000000,"inputs":[{"type":"address","name":"seller"}],"outputs":[{"type":"uint256"}]},{"type":"function","name":"listItem","constant":false,"payable":false,"gas":29000000,"inputs":[{"type":"address","name":"nftAddress"},{"type":"uint256","name":"tokenId"},{"type":"uint256","name":"price"}],"outputs":[]},{"type":"function","name":"updateListing","constant":false,"payable":false,"gas":29000000,"inputs":[{"type":"address","name":"nftAddress"},{"type":"uint256","name":"tokenId"},{"type":"uint256","name":"newPrice"}],"outputs":[]},{"type":"function","name":"withdrawProceeds","constant":false,"payable":false,"gas":29000000,"inputs":[],"outputs":[]}]')},48036:function(a){"use strict";a.exports=JSON.parse('{"4":{"NftMarketplace":["0xFf193a61bEbAd3f8A4b937A400135330eE190AE8"]},"31337":{"NftMarketplace":[""]}}')}},function(a){a.O(0,[971,288,774,888,179],function(){var b;return a(a.s=75557)}),_N_E=a.O()}])